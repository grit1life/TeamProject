<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
 	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{layout/default}">
<th:block layout:fragment="customTitle">
	<title>index</title>
 
</th:block>

<body class="hold-transition sidebar-mini layout-fixed">
<th:block layout:fragment="customContents">

  <div class="content-wrapper">  
    <!-- Content Header (Page header) -->
		 <section class="content-header">
		      <div class="container-fluid">
		        <div class="row mb-2">
		          <div class="col-sm-6">
		            <h1>공지사항 수정</h1>
		          </div>
		          <div class="col-sm-6">
		            <ol class="breadcrumb float-sm-right">
		              <li class="breadcrumb-item"><a th:href="@{boardList}">공지사항 목록</a></li>
		              <li class="breadcrumb-item active">공지사항 수정</li>
		            </ol>
		          </div>
		        </div>
		      </div><!-- /.container-fluid -->
		    </section>
		    
	  	<!-- form 시작 -->      
	  	<form id="bForm" th:method="post" th:action="@{modifyBoard}">
		    <!-- Main content -->
		    <section class="content">
		     <div class="container-fluid">
		      <div class="row">
		        <div class="col-md-12">
		          <div class="card card-outline card-info">
		            <div class="card-header">
		               <div class="form-group">
	                    <label for="bTitle">공지사항 제목</label>
	                    <input type="text" name="boardTitle" class="form-control" id="bTitle"
	                    		th:value="${b.boardTitle}">
	                   </div>
		            </div>
		            <!-- /.card-header -->
		            <div class="card-body pad">
		              <div class="mb-3">
		                <textarea name="boardContent" class="textarea"
		                          style="width: 100%; height: 200px; font-size: 14px; line-height: 18px; border: 1px solid #dddddd; padding: 10px;"
		                          th:text="${b.boardContent}"></textarea>
		              </div>
              		<th:block th:each="l : ${bf}">
              			<a th:text="${l.boardFileUrl}" th:with="url='/files/'+${l.boardFileUrl}"th:href="@{${url}}"></a>
					</th:block>
		              <p>작성자</p>
		              <button type="button" onclick="getAction()" class="btn btn-block btn-success">글 수정</button>
		            </div>
		          </div>
		        </div>
		        <!-- /.col-->
		      </div>
		      <!-- ./row -->
		     </div>
		    </section>
		    <!-- /.content -->
		    <input type="hidden" name="boardNo" th:value="${b.boardNo}">
	   </form>
	   <!-- form 끝 -->
 
  </div>
<!-- Summernote -->
<script src="../../plugins/summernote/summernote-bs4.min.js"></script>
<script src="../../plugins/summernote/summernote-ko-KR.min.js"></script>
<!-- SweetAlert2 -->
<script src="../../plugins/sweetalert2/sweetalert2.min.js"></script>
<script>
  $(function () {
    // Summernote
    $('#bTitle').focus();
    var windowHeight = $( window ).height();
    if(windowHeight<870){	
    	//스마트폰
    	$('.textarea').summernote({
          	height: 200,
          	lang : 'ko-KR'
    	})
    }else{
    	$('.textarea').summernote({
       		height: 450,
          	lang : 'ko-KR'
    	})
    }
    
    
  })
  //폼 제출
  function getAction(){
	if($('#bTitle').val()==""){
		//sweet alert
	    const Toast = Swal.mixin({
	        toast: true,
	        position: 'center',
	        showConfirmButton: false,
	        timer: 3000
	     });
	    
        Toast.fire({
          type: 'warning',
          title: '제목을 입력해주세요'
        })
	    //sweet alert 끝
	}else{
		$('#bForm').submit();
	}
	
  }
</script>
</th:block>
</body>
</html>

